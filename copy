nestjs-gateway:
    build:
      context: ./gateway
      dockerfile: Dockerfile
    ports:
      - "5000:5000"
    environment:
      - PORT=5000
      - API_KEY=555
      - KAFKA_BROKER=kafka:29092
      - KAFKA_GROUP_ID=gateway-yape
      - KAFKA_CLIENT_ID=gateway

  nestjs-anti-fraud2:
    build:
      context: ./anti-fraud
      dockerfile: Dockerfile
    environment:
      - KAFKA_BROKER=kafka:29092
      - KAFKA_GROUP_ID=antifraud-yape
      - KAFKA_CLIENT_ID=antifraud

  nestjs-transactions:
    build:
      context: ./transactions
      dockerfile: Dockerfile
    depends_on: [postgres, kafka]
    environment:
      - POSTGRES_HOST=postgres
      - POSTGRES_PORT=5432
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
      - POSTGRES_DATABASE=postgres
      - KAFKA_BROKER=kafka:29092
      - KAFKA_GROUP_ID=transaction-yape
      - KAFKA_CLIENT_ID=transaction